<!-- XenVibe Cards - Member List Template -->

<xf:title page="{$page}">{{ phrase('registered_members') }}</xf:title>

<xf:wrap template="member_wrapper">
	<xf:set var="$pageSelected" value="member_list" />
</xf:wrap>

<xf:macro id="metadata_macros::canonical_url" arg-canonicalUrl="{{ link('canonical:members/list', null, {'page': $page}) }}" />

<xf:css src="member.less" />

<div class="xv-members-page">
	<!-- Page Header -->
	<div class="xv-page-header">
		<div class="xv-page-header-content">
			<h1 class="xv-page-title">{{ phrase('registered_members') }}</h1>
			<p class="xv-page-subtitle">{{ phrase('browse_members_registered_on_this_community') }}</p>
		</div>
	</div>

	<!-- Filter Chips -->
	<div class="xv-members-filters">
		<div class="xv-filter-chips">
			<a href="{{ link('members') }}" class="xv-filter-chip">
				<span class="material-symbols-outlined">stars</span>
				{{ phrase('notable') }}
			</a>
			<a href="{{ link('members/list') }}" class="xv-filter-chip xv-filter-chip--active">
				<span class="material-symbols-outlined">group</span>
				{{ phrase('all_members') }}
			</a>
		</div>

		<!-- Search Box -->
		<div class="xv-member-search">
			<form action="{{ link('members/list') }}" method="get" class="xv-search-form">
				<div class="xv-search-input-wrap">
					<span class="material-symbols-outlined">search</span>
					<input type="text"
						   name="username"
						   class="xv-search-input"
						   placeholder="{{ phrase('search_for_members') }}"
						   value="{{ $username ?? '' }}"
						   autocomplete="off" />
				</div>
				<button type="submit" class="xv-search-btn">
					{{ phrase('search') }}
				</button>
			</form>
		</div>
	</div>

	<xf:if is="$users">
		<!-- Members Grid -->
		<div class="xv-members-grid">
			<xf:foreach loop="$users" key="$userId" value="$user">
				<xf:macro id="member_list_macros::member_card" arg-user="{$user}" />
			</xf:foreach>
		</div>

		<!-- Pagination -->
		<xf:pagenav link="members/list" page="{$page}" perpage="{$perPage}" total="{$total}"
			wrapperclass="xv-pagination-wrap" />
	<xf:else />
		<div class="xv-empty-state">
			<span class="material-symbols-outlined">group_off</span>
			<p>{{ phrase('no_members_found') }}</p>
		</div>
	</xf:if>
</div>

<xf:widgetpos id="member_list_sidebar" position="sidebar" />
