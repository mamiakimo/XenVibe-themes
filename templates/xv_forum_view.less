html.xv-layout-list {

  // Forum List Page - List Mode
  // ملاحظة: template-forum_list على html نفسه لذا نستخدم &
  &.template-forum_list {
    .block--category .block-body {
      grid-template-columns: 1fr !important;
    }

    .node--forum {
      flex-direction: row;
      align-items: center;
      padding: 1rem 1.25rem;

      .node-body {
        flex-direction: row;
        align-items: center;
        gap: 1rem;
        padding: 0;
      }

      .node-icon {
        margin-bottom: 0;
        flex-shrink: 0;
      }

      .node-main {
        flex: 1;
        min-width: 0;
      }

      .node-title {
        margin-bottom: 0.25rem;
      }

      .node-description {
        flex: none;
        min-height: auto;
        margin-bottom: 0;
      }

      .node-meta {
        margin-top: 0.5rem;
      }

      .node-statsMeta {
        margin-bottom: 0;
      }

      .node-extra {
        margin-top: 0;
        margin-inline-start: auto;
        flex-shrink: 0;
        width: 280px;
        max-width: 280px;
      }
    }
  }

  // What's New Pages - List Mode (تحويل الـ grid لعمود واحد)
  .structItemContainer--withReadIndicator,
  .structItemContainer--profilePost {
    grid-template-columns: 1fr !important;
  }
}

// ================================================================
// LAYOUT TOGGLE BUTTON - زر تبديل العرض
// ================================================================
.xv-layout-toggle {
  display: inline-flex;
  align-items: center;
  background: fade(@xf-textColor, 8%);
  border: none !important;
  border-radius: 0.5rem;
  padding: 0.25rem;
  gap: 0.125rem;
  margin-inline-start: 0.75rem;
  box-shadow: none !important;
  outline: none !important;

  // إزالة أي border من العناصر الداخلية
  &,
  & * {
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
  }

  .xv-layout-btn {
    all: unset;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    border-radius: 0.375rem;
    background: transparent;
    color: @xf-textColorMuted;
    cursor: pointer;
    transition: background 0.2s ease, color 0.2s ease;

    &:hover {
      background: fade(@xf-textColor, 10%);
      color: @xf-textColor;
    }

    &.is-active {
      background: @xf-linkColor;
      color: white;
    }

    .material-symbols-outlined {
      font-size: 1.125rem;
      line-height: 1;
    }
  }
}

// ================================================================
// FORUM VIEW - إصلاحات الـ Grid
// ================================================================
html.template-forum_view {

  // Quick Thread Form - يمتد على كل الأعمدة
  .structItem--quickCreate {
    grid-column: 1 / -1 !important;
  }

  // Sticky threads group - يمتد على كل الأعمدة ويكون grid
  .structItemContainer-group {
    grid-column: 1 / -1 !important;
    display: grid !important;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;

    @media (max-width: 767px) {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
  }

  // عند إغلاق السايدبار - 3 أعمدة
  .xv-sidebar--left.is-collapsed+.xv-content {
    .structItemContainer-group {
      grid-template-columns: repeat(3, 1fr);

      @media (max-width: 1200px) {
        grid-template-columns: repeat(2, 1fr);
      }

      @media (max-width: 767px) {
        grid-template-columns: 1fr;
      }
    }
  }
}

// List Mode - Forum View (يشمل الـ container والـ groups)
html.xv-layout-list.template-forum_view {
  .structItemContainer {
    grid-template-columns: 1fr !important;
  }

  .structItemContainer-group {
    grid-template-columns: 1fr !important;
  }
}

// ================================================================
// THREAD VIEW - Card Style Posts (Stitch Design)
// ================================================================
